{"version":3,"file":null,"sources":["/Users/joshua/djangospace/nostalgio/contact/static/js/models.js","/Users/joshua/djangospace/nostalgio/contact/static/js/views.js","/Users/joshua/djangospace/nostalgio/pages/static/js/temp/main.js"],"sourcesContent":["export var QuickSend = Backbone.Model.extend({\n    urlRoot: '/api/quicksend'\n});\n\nexport var QuickQuote = Backbone.Model.extend({\n    urlRoot: '/api/quickquote'\n});","export var QuickSendView = Backbone.View.extend({\n    el: '#quick-send-form',\n    container: '#quick-send-container',\n    taglineContainer: '#tagline-container',\n    formContent: '#contact-form-content',\n    CONTACT: 'contact',\n    QUOTE: 'quote',\n\n    events: {\n        'click button': 'sendForm',\n        'change #contact_switch': 'changeForm'\n    },\n\n    initialize: function(options) {\n        this.formDisplayed = this.CONTACT;\n        this.$container = $(this.container);\n        this.$taglineContainer = $(this.taglineContainer);\n        this.$formContent = $(this.formContent);\n        this.contactHTML = this.$formContent.html();\n        this.quoteHTML = $('#quote-form-content').removeAttr('style').html();\n        $('#quote-form-content').remove();\n        // this.model will refer to Contact model.\n        this.quoteModel = options.quoteModel;\n    },\n\n    changeForm: function() {\n        // Cache existing data.\n        let data = this.getFormJSON();\n        // Update Form UI\n        if ($('#contact_switch').is(':checked')) {\n            this.renderQuoteForm();\n        } else {\n            this.renderContactForm();\n        }\n        // Trigger resizing functions.\n        $(window).trigger('resize');\n        // Transfer existing data\n        this.setCommonData(data);\n    },\n\n    renderContactForm: function() {\n        this.formDisplayed = this.CONTACT;\n        this.$taglineContainer.removeClass('hide-for-medium-only')\n            .addClass('medium-6');\n        this.$container.removeClass('medium-12').removeClass('large-6').removeClass('large-offset-2')\n            .addClass('medium-6').addClass('large-4').addClass('large-offset-4');\n        this.$formContent.html(this.contactHTML);\n    }, \n\n    renderQuoteForm: function() {\n        this.formDisplayed = this.QUOTE;\n        this.$taglineContainer.removeClass('medium-6')\n            .addClass('hide-for-medium-only');\n        this.$container.removeClass('medium-6').removeClass('large-4').removeClass('large-offset-4')\n            .addClass('medium-12').addClass('large-6').addClass('large-offset-2');\n        this.$formContent.html(this.quoteHTML);\n    },\n\n    getFormJSON: function() {\n        let rawData = this.$el.serializeArray(),\n            data = {};\n        _.each(rawData, function(input) {\n            data[input.name] = input.value;\n        });\n        return data;\n    },\n\n    setCommonData: function(data) {\n        if (data.name && data.name.length > 0) {\n            $('[name=\"name\"]').val(data.name);\n        }\n        if (data.email && data.email.length > 0) {\n            $('[name=\"email\"]').val(data.email);\n        }\n    },\n\n    sendForm: function(e) {\n        e.preventDefault();\n        this.$el.append(loading);\n        let self = this,\n            data = this.$el.serialize(),\n            options = {\n                data: data,\n                error: function(model, response) {\n                    var errors = response.responseJSON;\n                    $('#quick-send-error').foundation('open');\n                },\n                complete: function() {\n                    self.$el.find('div.loading').remove();\n                }\n            };\n        if (this.formDisplayed == 'contact') {\n            this.sendContact(data, options);\n        } else {\n            this.sendQuote(data, options);\n        }\n    },\n\n    sendContact: function(data, defaultOptions) {\n        let self = this;\n        let options = {\n            success: function(model, response) {\n                $('#quick-send-success').foundation('open');\n                self.$el[0].reset();\n            }\n        };\n        _.extend(options, defaultOptions);\n\n        this.model.save(null, options);\n    },\n\n    sendQuote: function(data, defaultOptions) {\n        let self = this;\n        let options = {\n            success: function(model, response) {\n                $('#quick-quote-success').foundation('open');\n                self.$el[0].reset();\n            }\n        };\n        _.extend(options, defaultOptions);\n\n        this.quoteModel.save(null, options);\n    }\n});","$(document).foundation();\n\n$(document).ready(function(){\n    const MOBILE_WIDTH = 640;\n\n    $('.bxslider').bxSlider();\n\n    $(document).ready(function() {\n        $('#faq .block-faq_question').click(function() {\n            $(this).next('.block-faq_answer').slideToggle(500);\n            $(this).toggleClass('close');\n        });\n    });\n\n    $('.reveal_modal').click(function(event) {\n        event.preventDefault();\n\n        $('#modal-content').empty();\n        var link = $(this).attr(\"href\");\n        $('#modal-content').load(link + \" .modal-content\");\n    });\n\n    $('.testimonials').bxSlider({\n        auto: true,\n        mode: 'vertical',\n        pager: false,\n        controls: false,\n        slideMargin:3,\n    });\n\n    $('.adverts').bxSlider({\n        minSlides: 3,\n        maxSlides: 3,\n        slideWidth: 210,\n        slideMargin: 15\n    });\n\n\n    $(window).scroll(function() {\n        if ($(this).scrollTop() > 100) {\n            $('.scrollup').fadeIn();\n            $('#logo').css({\n                'height': '38px'\n            });\n        } else {\n            $('.scrollup').fadeOut();\n            $('#logo').css({\n                'height': '80px'\n            });\n        }\n    });\n\n    $('.scrollup').click(function() {\n        $(\"html, body\").animate({\n            scrollTop: 0\n        }, 600);\n        return false;\n    });\n\n    $('.scrolldown').click(function() {\n        var toTop = $('.intro').innerHeight() - 42;\n        $(\"html, body\").animate({\n            scrollTop: toTop\n        }, 600);\n        return false;\n    });\n\n    var center_divs = function center_divs() {\n        var MENU_HEIGHT = 54,\n            FUDGE = 10,\n            divHeight = $('.vertical-center').innerHeight(),\n            windowHeight = $(window).innerHeight(),\n            windowWidth = $(window).innerWidth();\n        if (windowWidth < MOBILE_WIDTH) {\n            $('.intro').stop().removeAttr('style');\n            $('.vertical-center').stop().removeAttr('style');\n        } else if ((windowHeight - MENU_HEIGHT) < divHeight) {\n            $('.intro').css({ 'height': 'auto'});\n        } else if (windowWidth > MOBILE_WIDTH) {\n            $('.intro').css({ 'height': '100vh'});\n            // Vertically align\n            $('.vertical-center').stop().animate({\n                'margin-top': (windowHeight/2 - divHeight/2 + FUDGE)\n            });\n        }\n    };\n\n    center_divs();\n    $(window).on('resize', function() {\n        center_divs();\n    });\n});\n\n\nimport { QuickSend, QuickQuote } from './models';\nimport { QuickSendView } from './views';\n\nif (HAS_QUICK_SEND === true) {\n    let contact = new QuickSend(),\n        quote = new QuickQuote(),\n        formView = new QuickSendView({ model: contact, quoteModel: quote });\n    formView.render();\n}"],"names":[],"mappings":"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"}